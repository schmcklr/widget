{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.decodePayload = exports.decodePacket = exports.encodePayload = exports.encodePacket = exports.protocol = void 0;\n\nconst encodePacket_js_1 = require(\"./encodePacket.js\");\n\nexports.encodePacket = encodePacket_js_1.default;\n\nconst decodePacket_js_1 = require(\"./decodePacket.js\");\n\nexports.decodePacket = decodePacket_js_1.default;\nconst SEPARATOR = String.fromCharCode(30); // see https://en.wikipedia.org/wiki/Delimiter#ASCII_delimited_text\n\nconst encodePayload = (packets, callback) => {\n  // some packets may be added to the array while encoding, so the initial length must be saved\n  const length = packets.length;\n  const encodedPackets = new Array(length);\n  let count = 0;\n  packets.forEach((packet, i) => {\n    // force base64 encoding for binary packets\n    (0, encodePacket_js_1.default)(packet, false, encodedPacket => {\n      encodedPackets[i] = encodedPacket;\n\n      if (++count === length) {\n        callback(encodedPackets.join(SEPARATOR));\n      }\n    });\n  });\n};\n\nexports.encodePayload = encodePayload;\n\nconst decodePayload = (encodedPayload, binaryType) => {\n  const encodedPackets = encodedPayload.split(SEPARATOR);\n  const packets = [];\n\n  for (let i = 0; i < encodedPackets.length; i++) {\n    const decodedPacket = (0, decodePacket_js_1.default)(encodedPackets[i], binaryType);\n    packets.push(decodedPacket);\n\n    if (decodedPacket.type === \"error\") {\n      break;\n    }\n  }\n\n  return packets;\n};\n\nexports.decodePayload = decodePayload;\nexports.protocol = 4;","map":{"version":3,"sources":["C:/Users/Kevin/Documents/Chat_Bot/widget/node_modules/engine.io-parser/build/cjs/index.js"],"names":["Object","defineProperty","exports","value","decodePayload","decodePacket","encodePayload","encodePacket","protocol","encodePacket_js_1","require","default","decodePacket_js_1","SEPARATOR","String","fromCharCode","packets","callback","length","encodedPackets","Array","count","forEach","packet","i","encodedPacket","join","encodedPayload","binaryType","split","decodedPacket","push","type"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,aAAR,GAAwBF,OAAO,CAACG,YAAR,GAAuBH,OAAO,CAACI,aAAR,GAAwBJ,OAAO,CAACK,YAAR,GAAuBL,OAAO,CAACM,QAAR,GAAmB,KAAK,CAAtH;;AACA,MAAMC,iBAAiB,GAAGC,OAAO,CAAC,mBAAD,CAAjC;;AACAR,OAAO,CAACK,YAAR,GAAuBE,iBAAiB,CAACE,OAAzC;;AACA,MAAMC,iBAAiB,GAAGF,OAAO,CAAC,mBAAD,CAAjC;;AACAR,OAAO,CAACG,YAAR,GAAuBO,iBAAiB,CAACD,OAAzC;AACA,MAAME,SAAS,GAAGC,MAAM,CAACC,YAAP,CAAoB,EAApB,CAAlB,C,CAA2C;;AAC3C,MAAMT,aAAa,GAAG,CAACU,OAAD,EAAUC,QAAV,KAAuB;AACzC;AACA,QAAMC,MAAM,GAAGF,OAAO,CAACE,MAAvB;AACA,QAAMC,cAAc,GAAG,IAAIC,KAAJ,CAAUF,MAAV,CAAvB;AACA,MAAIG,KAAK,GAAG,CAAZ;AACAL,EAAAA,OAAO,CAACM,OAAR,CAAgB,CAACC,MAAD,EAASC,CAAT,KAAe;AAC3B;AACA,KAAC,GAAGf,iBAAiB,CAACE,OAAtB,EAA+BY,MAA/B,EAAuC,KAAvC,EAA8CE,aAAa,IAAI;AAC3DN,MAAAA,cAAc,CAACK,CAAD,CAAd,GAAoBC,aAApB;;AACA,UAAI,EAAEJ,KAAF,KAAYH,MAAhB,EAAwB;AACpBD,QAAAA,QAAQ,CAACE,cAAc,CAACO,IAAf,CAAoBb,SAApB,CAAD,CAAR;AACH;AACJ,KALD;AAMH,GARD;AASH,CAdD;;AAeAX,OAAO,CAACI,aAAR,GAAwBA,aAAxB;;AACA,MAAMF,aAAa,GAAG,CAACuB,cAAD,EAAiBC,UAAjB,KAAgC;AAClD,QAAMT,cAAc,GAAGQ,cAAc,CAACE,KAAf,CAAqBhB,SAArB,CAAvB;AACA,QAAMG,OAAO,GAAG,EAAhB;;AACA,OAAK,IAAIQ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGL,cAAc,CAACD,MAAnC,EAA2CM,CAAC,EAA5C,EAAgD;AAC5C,UAAMM,aAAa,GAAG,CAAC,GAAGlB,iBAAiB,CAACD,OAAtB,EAA+BQ,cAAc,CAACK,CAAD,CAA7C,EAAkDI,UAAlD,CAAtB;AACAZ,IAAAA,OAAO,CAACe,IAAR,CAAaD,aAAb;;AACA,QAAIA,aAAa,CAACE,IAAd,KAAuB,OAA3B,EAAoC;AAChC;AACH;AACJ;;AACD,SAAOhB,OAAP;AACH,CAXD;;AAYAd,OAAO,CAACE,aAAR,GAAwBA,aAAxB;AACAF,OAAO,CAACM,QAAR,GAAmB,CAAnB","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.decodePayload = exports.decodePacket = exports.encodePayload = exports.encodePacket = exports.protocol = void 0;\nconst encodePacket_js_1 = require(\"./encodePacket.js\");\nexports.encodePacket = encodePacket_js_1.default;\nconst decodePacket_js_1 = require(\"./decodePacket.js\");\nexports.decodePacket = decodePacket_js_1.default;\nconst SEPARATOR = String.fromCharCode(30); // see https://en.wikipedia.org/wiki/Delimiter#ASCII_delimited_text\nconst encodePayload = (packets, callback) => {\n    // some packets may be added to the array while encoding, so the initial length must be saved\n    const length = packets.length;\n    const encodedPackets = new Array(length);\n    let count = 0;\n    packets.forEach((packet, i) => {\n        // force base64 encoding for binary packets\n        (0, encodePacket_js_1.default)(packet, false, encodedPacket => {\n            encodedPackets[i] = encodedPacket;\n            if (++count === length) {\n                callback(encodedPackets.join(SEPARATOR));\n            }\n        });\n    });\n};\nexports.encodePayload = encodePayload;\nconst decodePayload = (encodedPayload, binaryType) => {\n    const encodedPackets = encodedPayload.split(SEPARATOR);\n    const packets = [];\n    for (let i = 0; i < encodedPackets.length; i++) {\n        const decodedPacket = (0, decodePacket_js_1.default)(encodedPackets[i], binaryType);\n        packets.push(decodedPacket);\n        if (decodedPacket.type === \"error\") {\n            break;\n        }\n    }\n    return packets;\n};\nexports.decodePayload = decodePayload;\nexports.protocol = 4;\n"]},"metadata":{},"sourceType":"script"}